<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      class EventEmitter {
        constructor() {
          this.events = {};
        }

        on(event, listener) {
          (this.events[event] || (this.events[event] = [])).push(listener);
          return this; // 支持链式调用
        }

        emit(event, ...args) {
          (this.events[event] || []).forEach((fn) => fn(...args));
        }

        off(event, listener) {
          if (!this.events[event]) return;
          this.events[event] = this.events[event].filter(
            (fn) => fn !== listener
          );
        }
      }

      // 使用场景：跨组件通信/Vue2事件总线
      const bus = new EventEmitter();
      bus.on("login", (user) => console.log(user));
    </script>
  </body>
</html>
